#!/bin/bash

# Usage:
# build-song <song> <tempo>

# Build bass track

./build-track "$1"-bass triangle "$2"

# Build lead track

./build-track "$1"-lead square "$2"

# Build drum track

./drums "$1" "$2"

# Mix them together

sox -m "$1"-drums.wav "$1"-bass.wav "$1"-lead.wav "$1".wav

# Delete track files

rm "$1"-drums.wav
rm "$1"-bass.wav
rm "$1"-lead.wav

# Play it!

play "$1".wav
